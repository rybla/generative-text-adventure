{"traceId":"789ceda0cad9dfaeb3f7030cc271f160","spans":{"988339c0fee4179c":{"spanId":"988339c0fee4179c","traceId":"789ceda0cad9dfaeb3f7030cc271f160","parentSpanId":"6b741bf2d95977b1","startTime":1751305063262,"endTime":1751305063341.3682,"attributes":{"genkit:type":"util","genkit:name":"generate","genkit:path":"/{test_structured_output_union,t:flow}/{generate,t:util}","genkit:input":"{\"model\":\"googleai/gemini-2.5-flash\",\"messages\":[{\"role\":\"user\",\"content\":[{\"text\":\"make some example choices\"}]}],\"config\":{},\"output\":{\"schema\":{\"_def\":{\"unknownKeys\":\"strip\",\"catchall\":{\"_def\":{\"typeName\":\"ZodNever\"},\"~standard\":{\"version\":1,\"vendor\":\"zod\"}},\"typeName\":\"ZodObject\"},\"~standard\":{\"version\":1,\"vendor\":\"zod\"},\"_cached\":null},\"format\":\"json\",\"jsonSchema\":{\"type\":\"object\",\"properties\":{\"choices\":{\"type\":\"array\",\"items\":{\"type\":\"string\",\"const\":\"choice\"}}},\"required\":[\"choices\"],\"additionalProperties\":true,\"$schema\":\"http://json-schema.org/draft-07/schema#\"}}}","genkit:state":"error"},"displayName":"generate","links":[],"instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":2,"message":"[GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent: [400 Bad Request] Invalid JSON payload received. Unknown name \"const\" at 'generation_config.response_schema.properties[0].value.items': Cannot find field. [{\"@type\":\"type.googleapis.com/google.rpc.BadRequest\",\"fieldViolations\":[{\"field\":\"generation_config.response_schema.properties[0].value.items\",\"description\":\"Invalid JSON payload received. Unknown name \\\"const\\\" at 'generation_config.response_schema.properties[0].value.items': Cannot find field.\"}]}]"},"timeEvents":{"timeEvent":[{"time":1751305063341.3147,"annotation":{"attributes":{"exception.type":"Error","exception.message":"[GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent: [400 Bad Request] Invalid JSON payload received. Unknown name \"const\" at 'generation_config.response_schema.properties[0].value.items': Cannot find field. [{\"@type\":\"type.googleapis.com/google.rpc.BadRequest\",\"fieldViolations\":[{\"field\":\"generation_config.response_schema.properties[0].value.items\",\"description\":\"Invalid JSON payload received. Unknown name \\\"const\\\" at 'generation_config.response_schema.properties[0].value.items': Cannot find field.\"}]}]","exception.stacktrace":"Error: [GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent: [400 Bad Request] Invalid JSON payload received. Unknown name \"const\" at 'generation_config.response_schema.properties[0].value.items': Cannot find field. [{\"@type\":\"type.googleapis.com/google.rpc.BadRequest\",\"fieldViolations\":[{\"field\":\"generation_config.response_schema.properties[0].value.items\",\"description\":\"Invalid JSON payload received. Unknown name \\\"const\\\" at 'generation_config.response_schema.properties[0].value.items': Cannot find field.\"}]}]\n    at new GoogleGenerativeAIError (/Users/henry/Documents/generative-text-adventure/node_modules/@google/generative-ai/dist/index.js:250:9)\n    at new GoogleGenerativeAIFetchError (/Users/henry/Documents/generative-text-adventure/node_modules/@google/generative-ai/dist/index.js:271:9)\n    at handleResponseNotOk (/Users/henry/Documents/generative-text-adventure/node_modules/@google/generative-ai/dist/index.js:434:15)\n    at processTicksAndRejections (native:7:39)"},"description":"exception"}}]}},"82e9ff4dd308cdce":{"spanId":"82e9ff4dd308cdce","traceId":"789ceda0cad9dfaeb3f7030cc271f160","parentSpanId":"988339c0fee4179c","startTime":1751305063275,"endTime":1751305063340.4946,"attributes":{"genkit:type":"action","genkit:metadata:subtype":"model","genkit:name":"googleai/gemini-2.5-flash","genkit:path":"/{test_structured_output_union,t:flow}/{generate,t:util}/{googleai/gemini-2.5-flash,t:action,s:model}","genkit:input":"{\"messages\":[{\"role\":\"user\",\"content\":[{\"text\":\"make some example choices\"}]}],\"config\":{},\"tools\":[],\"output\":{\"constrained\":true,\"contentType\":\"application/json\",\"format\":\"json\",\"schema\":{\"type\":\"object\",\"properties\":{\"choices\":{\"type\":\"array\",\"items\":{\"type\":\"string\",\"const\":\"choice\"}}},\"required\":[\"choices\"],\"additionalProperties\":true,\"$schema\":\"http://json-schema.org/draft-07/schema#\"}}}","genkit:state":"error"},"displayName":"googleai/gemini-2.5-flash","links":[],"instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":2,"message":"[GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent: [400 Bad Request] Invalid JSON payload received. Unknown name \"const\" at 'generation_config.response_schema.properties[0].value.items': Cannot find field. [{\"@type\":\"type.googleapis.com/google.rpc.BadRequest\",\"fieldViolations\":[{\"field\":\"generation_config.response_schema.properties[0].value.items\",\"description\":\"Invalid JSON payload received. Unknown name \\\"const\\\" at 'generation_config.response_schema.properties[0].value.items': Cannot find field.\"}]}]"},"timeEvents":{"timeEvent":[{"time":1751305063340.3147,"annotation":{"attributes":{"exception.type":"Error","exception.message":"[GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent: [400 Bad Request] Invalid JSON payload received. Unknown name \"const\" at 'generation_config.response_schema.properties[0].value.items': Cannot find field. [{\"@type\":\"type.googleapis.com/google.rpc.BadRequest\",\"fieldViolations\":[{\"field\":\"generation_config.response_schema.properties[0].value.items\",\"description\":\"Invalid JSON payload received. Unknown name \\\"const\\\" at 'generation_config.response_schema.properties[0].value.items': Cannot find field.\"}]}]","exception.stacktrace":"Error: [GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent: [400 Bad Request] Invalid JSON payload received. Unknown name \"const\" at 'generation_config.response_schema.properties[0].value.items': Cannot find field. [{\"@type\":\"type.googleapis.com/google.rpc.BadRequest\",\"fieldViolations\":[{\"field\":\"generation_config.response_schema.properties[0].value.items\",\"description\":\"Invalid JSON payload received. Unknown name \\\"const\\\" at 'generation_config.response_schema.properties[0].value.items': Cannot find field.\"}]}]\n    at new GoogleGenerativeAIError (/Users/henry/Documents/generative-text-adventure/node_modules/@google/generative-ai/dist/index.js:250:9)\n    at new GoogleGenerativeAIFetchError (/Users/henry/Documents/generative-text-adventure/node_modules/@google/generative-ai/dist/index.js:271:9)\n    at handleResponseNotOk (/Users/henry/Documents/generative-text-adventure/node_modules/@google/generative-ai/dist/index.js:434:15)\n    at processTicksAndRejections (native:7:39)"},"description":"exception"}}]}},"6b741bf2d95977b1":{"spanId":"6b741bf2d95977b1","traceId":"789ceda0cad9dfaeb3f7030cc271f160","startTime":1751305063260,"endTime":1751305063341.897,"attributes":{"genkit:type":"action","genkit:metadata:subtype":"flow","genkit:name":"test_structured_output_union","genkit:isRoot":true,"genkit:path":"/{test_structured_output_union,t:flow}","genkit:metadata:context":"{}","genkit:input":"{\"prompt\":\"make some example choices\"}","genkit:state":"error"},"displayName":"test_structured_output_union","links":[],"instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":2,"message":"[GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent: [400 Bad Request] Invalid JSON payload received. Unknown name \"const\" at 'generation_config.response_schema.properties[0].value.items': Cannot find field. [{\"@type\":\"type.googleapis.com/google.rpc.BadRequest\",\"fieldViolations\":[{\"field\":\"generation_config.response_schema.properties[0].value.items\",\"description\":\"Invalid JSON payload received. Unknown name \\\"const\\\" at 'generation_config.response_schema.properties[0].value.items': Cannot find field.\"}]}]"},"timeEvents":{"timeEvent":[{"time":1751305063341.844,"annotation":{"attributes":{"exception.type":"Error","exception.message":"[GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent: [400 Bad Request] Invalid JSON payload received. Unknown name \"const\" at 'generation_config.response_schema.properties[0].value.items': Cannot find field. [{\"@type\":\"type.googleapis.com/google.rpc.BadRequest\",\"fieldViolations\":[{\"field\":\"generation_config.response_schema.properties[0].value.items\",\"description\":\"Invalid JSON payload received. Unknown name \\\"const\\\" at 'generation_config.response_schema.properties[0].value.items': Cannot find field.\"}]}]","exception.stacktrace":"Error: [GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent: [400 Bad Request] Invalid JSON payload received. Unknown name \"const\" at 'generation_config.response_schema.properties[0].value.items': Cannot find field. [{\"@type\":\"type.googleapis.com/google.rpc.BadRequest\",\"fieldViolations\":[{\"field\":\"generation_config.response_schema.properties[0].value.items\",\"description\":\"Invalid JSON payload received. Unknown name \\\"const\\\" at 'generation_config.response_schema.properties[0].value.items': Cannot find field.\"}]}]\n    at new GoogleGenerativeAIError (/Users/henry/Documents/generative-text-adventure/node_modules/@google/generative-ai/dist/index.js:250:9)\n    at new GoogleGenerativeAIFetchError (/Users/henry/Documents/generative-text-adventure/node_modules/@google/generative-ai/dist/index.js:271:9)\n    at handleResponseNotOk (/Users/henry/Documents/generative-text-adventure/node_modules/@google/generative-ai/dist/index.js:434:15)\n    at processTicksAndRejections (native:7:39)"},"description":"exception"}}]}}},"displayName":"test_structured_output_union","startTime":1751305063260,"endTime":1751305063341.897}